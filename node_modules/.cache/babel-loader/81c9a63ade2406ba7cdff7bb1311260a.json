{"ast":null,"code":"var _jsxFileName = \"/Users/celestin/Desktop/tic-tac-toe/src/index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction chargeWinner(squares) {\n  const lines = [[0, 1, 2], [3, 4, 5], [6, 7, 8], [0, 3, 6], [1, 4, 7], [2, 5, 8], [0, 4, 8], [2, 4, 6]];\n\n  for (let i = 0; i < lines.length; i++) {\n    let [a, b, c] = lines[i];\n\n    if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\n      return {\n        winner: squares[a],\n        line: lines[i]\n      };\n    }\n  }\n\n  return null;\n}\n\nfunction Square(props) {\n  let {\n    value,\n    onClick,\n    style\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    className: \"square\",\n    onClick: onClick,\n    style: style,\n    children: value\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 30,\n    columnNumber: 9\n  }, this);\n}\n\n_c = Square;\n\nclass Board extends React.Component {\n  renderSquare(i) {\n    const {\n      squares,\n      onClick,\n      line\n    } = this.props;\n    return /*#__PURE__*/_jsxDEV(Square, {\n      value: squares[i],\n      onClick: () => onClick(i),\n      style: (line || []).includes(i) ? {\n        backgroundColor: 'aquamarine'\n      } : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }, this);\n  }\n\n  createSquare(row, col) {\n    const squares = [];\n    let index = 0;\n\n    for (let i = 0; i < row; i++) {\n      const rowSquares = [];\n\n      for (let j = 0; j < col; j++) {\n        const square = this.renderSquare(index);\n        rowSquares.push(square);\n        index += 1;\n      }\n\n      squares.push( /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"board-row\",\n        children: rowSquares\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this));\n    }\n\n    return squares;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: this.createSquare(3, 3)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this);\n  }\n\n}\n\nclass Game extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      history: [Array(9).fill(null)],\n      isNext: true,\n      step: 0,\n      position: []\n    };\n  }\n\n  jumpTo(i, winner) {\n    const {\n      history\n    } = this.state;\n\n    if ((winner || history.length === 10) && i === 0) {\n      this.setState({\n        history: history.slice(0, i + 1)\n      });\n    }\n\n    this.setState({\n      step: i,\n      isNext: i % 2 === 0\n    });\n  }\n\n  handleClick(i) {\n    let {\n      history,\n      isNext,\n      step,\n      position\n    } = this.state;\n    let currentPosition;\n\n    if (step < position.length) {\n      position[step] = [i % 3 + 1, Math.floor(i / 3) + 1];\n      currentPosition = position;\n    } else {\n      currentPosition = position.concat([[i % 3 + 1, Math.floor(i / 3) + 1]]);\n    }\n\n    let newHistory = history.slice(0, step + 1);\n    let current = newHistory[newHistory.length - 1];\n    let squares = current.slice();\n\n    if (chargeWinner(squares) || squares[i]) {\n      return;\n    }\n\n    squares[i] = isNext ? 'X' : 'O';\n    this.setState({\n      history: newHistory.concat([squares]),\n      isNext: !isNext,\n      step: newHistory.length,\n      position: currentPosition\n    });\n  }\n\n  render() {\n    const {\n      history,\n      isNext,\n      step,\n      position\n    } = this.state;\n    const current = history[step];\n    const {\n      winner,\n      line\n    } = chargeWinner(current) || {};\n    const moves = history.map((i, index) => {\n      let desc;\n\n      if (index === 0) {\n        if (history.length === 10 || winner) {\n          desc = \"重新开始\";\n        } else {\n          desc = \"开始游戏\";\n        }\n      } else {\n        desc = `移动到步骤（${index}）`;\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"li\", {\n        children: parseInt(index) === step ? /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => this.jumpTo(index, winner),\n            children: /*#__PURE__*/_jsxDEV(\"b\", {\n              children: desc\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 84\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 33\n          }, this), index ? /*#__PURE__*/_jsxDEV(\"span\", {\n            children: `  当前坐标为：(${position[index - 1][0]},${position[index - 1][1]})`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 42\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => this.jumpTo(index, winner),\n            children: desc\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 33\n          }, this), index ? /*#__PURE__*/_jsxDEV(\"span\", {\n            children: `  当前坐标为：(${position[index - 1][0]},${position[index - 1][1]})`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 42\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 29\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this);\n    });\n    let status;\n\n    if (winner) {\n      status = `获胜者是${winner}！`;\n    } else if (history.length === 10) {\n      status = '平局！';\n    } else {\n      status = `下一步是${isNext ? 'X' : 'O'}`;\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-board\",\n        children: /*#__PURE__*/_jsxDEV(Board, {\n          squares: current,\n          line: line,\n          onClick: i => this.handleClick(i)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"game-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '20px'\n          },\n          children: status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"ol\", {\n          children: moves\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }, this);\n  }\n\n} // ========================================\n\n\nReactDOM.render( /*#__PURE__*/_jsxDEV(Game, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 186,\n  columnNumber: 5\n}, this), document.getElementById('root'));\n\nvar _c;\n\n$RefreshReg$(_c, \"Square\");","map":{"version":3,"sources":["/Users/celestin/Desktop/tic-tac-toe/src/index.js"],"names":["React","ReactDOM","chargeWinner","squares","lines","i","length","a","b","c","winner","line","Square","props","value","onClick","style","Board","Component","renderSquare","includes","backgroundColor","createSquare","row","col","index","rowSquares","j","square","push","render","Game","constructor","state","history","Array","fill","isNext","step","position","jumpTo","setState","slice","handleClick","currentPosition","Math","floor","concat","newHistory","current","moves","map","desc","parseInt","fontSize","status","document","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\n\n\nfunction chargeWinner(squares) {\n    const lines = [\n        [0, 1, 2],\n        [3, 4, 5],\n        [6, 7, 8],\n        [0, 3, 6],\n        [1, 4, 7],\n        [2, 5, 8],\n        [0, 4, 8],\n        [2, 4, 6],\n    ];\n    for (let i=0; i<lines.length; i++) {\n        let [a, b, c] = lines[i];\n        if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\n            return {winner: squares[a], line: lines[i]};\n        }\n    }\n    return null;\n}\n\nfunction Square(props) {\n    let {value, onClick, style} = props;\n\n    return (\n        <button className=\"square\" onClick={onClick} style={style}>\n            {value}\n        </button>\n    );\n}\n\nclass Board extends React.Component {\n\n    renderSquare(i) {\n        const {squares, onClick, line} = this.props\n        return (\n            <Square\n                value={squares[i]}\n                onClick={() => onClick(i)}\n                style={(line || []).includes(i) ? {backgroundColor: 'aquamarine'} : null}\n            />\n        );\n    }\n\n    createSquare(row, col) {\n        const squares = [];\n        let index = 0;\n        for (let i=0; i<row; i++) {\n            const rowSquares = [];\n            for (let j=0; j<col; j++) {\n                const square = this.renderSquare(index);\n                rowSquares.push(square);\n                index += 1;\n            }\n            squares.push(\n                <div className=\"board-row\">\n                    {rowSquares}\n                </div>\n            )\n        }\n        return squares;\n    }\n\n    render() {\n        return (\n            <div>\n                {this.createSquare(3,3)}\n            </div>\n        );\n    }\n}\n\nclass Game extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            history: [Array(9).fill(null)],\n            isNext: true,\n            step: 0,\n            position: [],\n        }\n    }\n\n    jumpTo(i, winner) {\n        const {history} = this.state;\n        if ((winner || history.length === 10) && i === 0) {\n            this.setState({\n                history: history.slice(0,i+1)\n            })\n        }\n        this.setState({\n            step: i,\n            isNext: (i % 2) === 0,\n        });\n    }\n\n    handleClick(i) {\n        let {history, isNext, step, position} = this.state;\n        let currentPosition;\n        if (step < position.length) {\n            position[step] = [i%3+1,Math.floor(i/3)+1];\n            currentPosition = position;\n        } else {\n            currentPosition = position.concat([[i%3+1,Math.floor(i/3)+1]]);\n        }\n        let newHistory = history.slice(0, step+1)\n        let current = newHistory[newHistory.length - 1];\n        let squares = current.slice();\n        if (chargeWinner(squares) || squares[i]) {\n            return;\n        }\n        squares[i] = isNext ? 'X' : 'O';\n        this.setState({\n            history: newHistory.concat([squares]),\n            isNext: !isNext,\n            step: newHistory.length,\n            position: currentPosition\n        });\n    }\n\n    render() {\n        const {history, isNext, step, position} = this.state;\n        const current = history[step];\n        const {winner, line} = chargeWinner(current) || {};\n        const moves = history.map((i, index) => {\n            let desc;\n            if (index === 0) {\n                if (history.length === 10 || winner) {\n                    desc = \"重新开始\";\n                } else {\n                    desc = \"开始游戏\";\n                }\n            } else {\n                desc = `移动到步骤（${index}）`;\n            }\n            return (\n                <li key={index}>\n                    {\n                        parseInt(index) === step ?\n                            <div style={{fontSize: '20px'}}>\n                                <button onClick={() => this.jumpTo(index, winner)}><b>{desc}</b></button>\n                                {index ? <span>{`  当前坐标为：(${position[index-1][0]},${position[index-1][1]})`}</span> : null}\n                            </div>:\n                            <div style={{fontSize: '20px'}}>\n                                <button onClick={() => this.jumpTo(index, winner)}>{desc}</button>\n                                {index ? <span>{`  当前坐标为：(${position[index-1][0]},${position[index-1][1]})`}</span> : null}\n                            </div>\n                    }\n                </li>\n            );\n        });\n\n        let status;\n        if (winner) {\n            status = `获胜者是${winner}！`;\n        } else if (history.length === 10) {\n            status = '平局！';\n        } else {\n            status = `下一步是${isNext ? 'X' : 'O'}`;\n        }\n        return (\n            <div>\n                <div className=\"game-board\">\n                    <Board\n                        squares={current}\n                        line={line}\n                        onClick={(i) => this.handleClick(i)}\n                    />\n                </div>\n                <div className=\"game-info\">\n                    <div style={{fontSize: '20px'}}>{status}</div>\n                    <ol>{moves}</ol>\n                </div>\n            </div>\n        );\n    }\n}\n\n// ========================================\n\nReactDOM.render(\n    <Game />,\n    document.getElementById('root')\n);\n"]},"metadata":{},"sourceType":"module"}